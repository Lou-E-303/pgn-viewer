export function bindMobileMousedown(el, f, redraw) {
    for (const mousedownEvent of ['touchstart', 'mousedown']) {
        el.addEventListener(mousedownEvent, e => {
            f(e);
            e.preventDefault();
            if (redraw)
                redraw();
        }, { passive: false });
    }
}
export const bindNonPassive = (eventName, f, redraw) => bind(eventName, f, redraw, false);
export const bind = (eventName, f, redraw, passive = true) => onInsert(el => el.addEventListener(eventName, e => {
    const res = f(e);
    if (res === false)
        e.preventDefault();
    redraw === null || redraw === void 0 ? void 0 : redraw();
    return res;
}, { passive }));
export function onInsert(f) {
    return {
        insert: vnode => f(vnode.elm),
    };
}
export function stepwiseScroll(inner) {
    let scrollTotal = 0;
    return (e) => {
        scrollTotal += e.deltaY * (e.deltaMode ? 40 : 1);
        if (Math.abs(scrollTotal) >= 4) {
            inner(e, true);
            scrollTotal = 0;
        }
        else {
            inner(e, false);
        }
    };
}
export function eventRepeater(action, e) {
    const repeat = () => {
        action();
        delay = Math.max(100, delay - delay / 15);
        timeout = setTimeout(repeat, delay);
    };
    let delay = 350;
    let timeout = setTimeout(repeat, 500);
    action();
    const eventName = e.type == 'touchstart' ? 'touchend' : 'mouseup';
    document.addEventListener(eventName, () => clearTimeout(timeout), { once: true });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sVUFBVSxtQkFBbUIsQ0FBQyxFQUFlLEVBQUUsQ0FBd0IsRUFBRSxNQUFtQjtJQUNoRyxLQUFLLE1BQU0sY0FBYyxJQUFJLENBQUMsWUFBWSxFQUFFLFdBQVcsQ0FBQyxFQUFFO1FBQ3hELEVBQUUsQ0FBQyxnQkFBZ0IsQ0FDakIsY0FBYyxFQUNkLENBQUMsQ0FBQyxFQUFFO1lBQ0YsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ25CLElBQUksTUFBTTtnQkFBRSxNQUFNLEVBQUUsQ0FBQztRQUN2QixDQUFDLEVBQ0QsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQ25CLENBQUM7S0FDSDtBQUNILENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsQ0FBa0IsU0FBaUIsRUFBRSxDQUFnQixFQUFFLE1BQW1CLEVBQVMsRUFBRSxDQUNqSCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFFcEMsTUFBTSxDQUFDLE1BQU0sSUFBSSxHQUFHLENBQ2xCLFNBQWlCLEVBQ2pCLENBQWdCLEVBQ2hCLE1BQW1CLEVBQ25CLE9BQU8sR0FBRyxJQUFJLEVBQ1AsRUFBRSxDQUNULFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUNaLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FDakIsU0FBUyxFQUNULENBQUMsQ0FBQyxFQUFFO0lBQ0YsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQU0sQ0FBQyxDQUFDO0lBQ3RCLElBQUksR0FBRyxLQUFLLEtBQUs7UUFBRSxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDdEMsTUFBTSxhQUFOLE1BQU0sdUJBQU4sTUFBTSxFQUFJLENBQUM7SUFDWCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUMsRUFDRCxFQUFFLE9BQU8sRUFBRSxDQUNaLENBQ0YsQ0FBQztBQUVKLE1BQU0sVUFBVSxRQUFRLENBQXdCLENBQXVCO0lBQ3JFLE9BQU87UUFDTCxNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQVEsQ0FBQztLQUNuQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sVUFBVSxjQUFjLENBQUMsS0FBK0M7SUFDNUUsSUFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDO0lBQ3BCLE9BQU8sQ0FBQyxDQUFhLEVBQUUsRUFBRTtRQUN2QixXQUFXLElBQUksQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakQsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUM5QixLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ2YsV0FBVyxHQUFHLENBQUMsQ0FBQztTQUNqQjthQUFNO1lBQ0wsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUNqQjtJQUNILENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLFVBQVUsYUFBYSxDQUFDLE1BQWtCLEVBQUUsQ0FBUTtJQUN4RCxNQUFNLE1BQU0sR0FBRyxHQUFHLEVBQUU7UUFDbEIsTUFBTSxFQUFFLENBQUM7UUFDVCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxHQUFHLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQztRQUMxQyxPQUFPLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN0QyxDQUFDLENBQUM7SUFDRixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUM7SUFDaEIsSUFBSSxPQUFPLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN0QyxNQUFNLEVBQUUsQ0FBQztJQUNULE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUNsRSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3BGLENBQUMifQ==